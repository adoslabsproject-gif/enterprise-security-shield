parameters:
    level: 8
    paths:
        - src
    excludePaths:
        - src/Contracts
        - src/AdminIntegration  # Requires optional ados-labs/enterprise-admin-panel

    # PHP 8.1+ features
    phpVersion: 80100

    # Stricter checks
    reportUnmatchedIgnoredErrors: false
    treatPhpDocTypesAsCertain: false

    # Extensions
    stubFiles:
        - stubs/Redis.stub

    ignoreErrors:
        # Missing type specifications - acceptable for complex return arrays
        -
            identifier: missingType.iterableValue
        -
            identifier: missingType.generics

        # Optional dependencies
        - '#Instantiated class GuzzleHttp\\Psr7\\Response not found#'
        - '#Class Predis\\Client not found#'
        - '#unknown class Predis\\Client#'
        - '#Instantiated class GeoIp2\\Database\\Reader not found#'

        # Return type variations are acceptable for complex arrays
        - '#should return array\{.+\} but returns array#'

        # Property written for future use
        - '#Property .+ is never read, only written#'

        # Dead catch is intentional defensive coding
        - '#Dead catch#'

        # Configuration array merging patterns
        - '#does not accept non-empty-array<string, mixed>#'
        - '#does not accept array\{#'

        # PSR-7 Response type variations
        - '#should return Psr\\Http\\Message\\ResponseInterface but returns#'
        - '#Parameter .+ expects .+, string\|false given#'

        # Mixed type operations in ML/detection code
        - '#Cannot access offset .+ on mixed#'
        - '#Parameter .+ expects .+, mixed given#'
        - '#Part .+ of encapsed string cannot be cast to string#'

        # Config class method calls - class uses __call magic
        - '#Call to an undefined method AdosLabs\\EnterpriseSecurityShield\\Config\\SecurityConfig::.+#'

        # Anonymous class return types
        - '#Anonymous class is not subtype of#'

        # WeakMap generic typing
        - '#does not accept WeakMap#'

        # Unused constants - preserved for future use
        - '#Constant .+ is unused#'

        # Nullable parameters in string operations (defensive coding)
        - '#Parameter .+ expects string, string\|null given#'
        - '#Parameter .+ expects array\|string, string\|null given#'

        # in_array with empty arrays (defensive coding)
        - '#Call to function in_array\(\) with arguments .+ will always evaluate to false#'

        # Variable checks that are always true/false (defensive coding)
        - '#Variable .+ in empty\(\) always exists#'
        - '#Offset .+ on left side of \?\? always exists#'
        - '#in isset\(\) always exists#'

        # Object|null method calls (handled at runtime)
        - '#Cannot call method .+ on object\|null#'

        # Parameter type mismatches for complex array structures
        - '#Parameter .+ of method .+ expects array\{#'

        # array_key_first may return null
        - '#expects string, int\|string\|null given#'
        - '#expects string, string\|null given#'
